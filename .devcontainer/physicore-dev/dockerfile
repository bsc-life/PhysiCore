FROM gcc:15.2.0

# Configure APT to allow unsigned repositories due to LLVM key expiration
# This is needed because the LLVM 20 signing key uses SHA1 which is no longer secure as of 2026-02-01
RUN echo "APT::Get::AllowUnauthenticated \"true\";" > /etc/apt/apt.conf.d/99-allow-unsigned && \
    echo "Acquire::AllowInsecureRepositories \"true\";" >> /etc/apt/apt.conf.d/99-allow-unsigned && \
    echo "Acquire::AllowDowngradeToInsecureRepositories \"true\";" >> /etc/apt/apt.conf.d/99-allow-unsigned

# Remove the problematic LLVM repository entirely to avoid signature issues during feature installations
# Users can still install LLVM manually if needed
RUN apt-get update || true && \
    apt-get install -y --no-install-recommends \
        lsb-release wget && \
    apt-get clean && rm -rf /var/lib/apt/lists/*
